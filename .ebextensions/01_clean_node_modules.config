files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/01_delete_node_modules.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      if [ -d /var/app/staging/node_modules ]; then
        rm -rf /var/app/staging/node_modules
      fi

container_commands:
  01_delete_node_modules:
    command: "rm -rf /var/app/staging/node_modules"
    cwd: /var/app/staging
  02_npm_install:
    command: "npm install"
    cwd: /var/app/staging
